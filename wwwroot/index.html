<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Expense Tracker</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background: radial-gradient(ellipse at top, #101014 0%, #0a0a0c 100%);
            color: #ffffff;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px;
        }
        .brand {
            font-size: 17px;
            opacity: 0.8;
            text-decoration: none;
            color: #42e8ff;
            margin-bottom: 25px;
            font-weight: 300;
        }
        .container {
            width: 520px;
            background: rgba(255,255,255,0.07);
            backdrop-filter: blur(14px);
            border-radius: 18px;
            padding: 30px;
            border: 1px solid rgba(255,255,255,0.12);
            box-shadow: 0 0 40px rgba(0,0,0,0.5);
        }
        h1 {
            font-size: 29px;
            font-weight: 600;
            letter-spacing: 0.5px;
            margin-bottom: 28px;
            text-align: center;
        }
        input, select {
            width: 100%;
            padding: 15px;
            font-size: 16px;
            margin-top: 12px;
            border-radius: 10px;
            background: rgba(255,255,255,0.08);
            border: 1px solid rgba(255,255,255,0.18);
            color: #ffffff;
        }
        button {
            width: 100%;
            padding: 15px;
            font-size: 17px;
            font-weight: 600;
            margin-top: 20px;
            border-radius: 10px;
            background: linear-gradient(90deg, #0094ff, #00f0ff);
            border: none;
            cursor: pointer;
            transition: 0.3s;
            color: #ffffff;
        }
        button:hover {
            transform: scale(1.03);
            box-shadow: 0 0 12px #00e6ff;
        }
        table {
            margin-top: 50px;
            width: 95%;
            border-collapse: collapse;
            font-size: 16px;
            opacity: 0.95;
        }
        th {
            padding: 14px;
            color: #59d4ff;
            font-weight: 600;
            border-bottom: 1px solid rgba(255,255,255,0.15);
        }
        td {
            padding: 14px;
            border-bottom: 1px solid rgba(255,255,255,0.07);
            font-weight: 300;
        }
        tr:hover td {
            background: rgba(255,255,255,0.05);
        }
    </style>
</head>
<body>

<a class="brand" href="https://github.com/KishanGollamudi" target="_blank">â˜… Expense Tracker by Kishan Gollamudi</a>

<div class="container">
    <h1>ğŸ’° Expense Tracker</h1>

    <input id="user" placeholder="ğŸ‘¤ Name (Ex: Kishan)">
    <input id="desc" placeholder="ğŸ“ Description">
    <input id="amount" type="number" placeholder="ğŸ’µ Amount">

    <select id="category">
        <option disabled selected>ğŸ“Œ Select Category</option>
        <option>ğŸ” Food & Dining</option>
        <option>ğŸ›ï¸ Shopping</option>
        <option>ğŸ¬ Entertainment</option>
        <option>ğŸš• Travel & Transport</option>
        <option>ğŸ“± Mobile & Internet</option>
        <option>ğŸ  Rent & Housing</option>
        <option>ğŸ’¡ Electricity & Bills</option>
        <option>ğŸ’¼ Work & Office</option>
        <option>ğŸ¥ Health & Medical</option>
        <option>ğŸ Gifts & Donations</option>
        <option>ğŸ“š Education & Courses</option>
        <option>ğŸ¾ Pets</option>
        <option>ğŸ§¾ Subscriptions</option>
        <option>ğŸ’³ EMIs & Loan</option>
        <option>ğŸ§´ Self-care</option>
        <option>âš™ï¸ Other</option>
    </select>

    <input id="date" type="date">

    <button onclick="addExpense()">â• Add Expense</button>
</div>

<table>
    <thead>
        <tr>
            <th>User</th>
            <th>Description</th>
            <th>â‚¹ Amount</th>
            <th>Category</th>
            <th>Date</th>
        </tr>
    </thead>
    <tbody id="expenseTable"></tbody>
</table>

<script>
async function loadExpenses() {
    const res = await fetch("/api/expenses");
    const data = await res.json();
    const table = document.getElementById("expenseTable");
    table.innerHTML = "";
    data.forEach(exp => {
        table.innerHTML += `<tr>
            <td>${exp.user}</td>
            <td>${exp.description}</td>
            <td>â‚¹ ${exp.amount}</td>
            <td>${exp.category}</td>
            <td>${exp.date}</td>
        </tr>`;
    });
}

async function addExpense() {
    const user = document.getElementById("user").value;
    const desc = document.getElementById("desc").value;
    const amount = Number(document.getElementById("amount").value);
    const category = document.getElementById("category").value;
    const date = document.getElementById("date").value;

    if (!user || !desc || !amount || category === "ğŸ“Œ Select Category") {
        alert("Please enter valid values.");
        return;
    }

    await fetch("/api/expenses", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify({
            user: user,
            description: desc,
            amount: amount,
            category: category,
            date: date
        })
    });

    loadExpenses();
}
loadExpenses();
</script>

</body>
</html>

